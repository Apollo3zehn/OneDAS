<div class="channel-expander" @onclick="this.OnClick" @onmouseover="() => _showSampleRates = true" @onmouseout="() => _showSampleRates = false">
    <div class="channel-name">
        @if (string.IsNullOrWhiteSpace(this.Channel.Unit))
        {
            @this.Channel.Name
        }
        else
        {
            <span>@this.Channel.Name / @this.Channel.Unit</span>
        }

        <div class="channel-special-info">
            @if (this.AppState.IsEditEnabled)
            {
                <input type="text" @bind-value="this.Channel.SpecialInfo" />
            }
            else
            {
                @if (!string.IsNullOrWhiteSpace(this.Channel.SpecialInfo))
                {
                    <span><i class="fas fa-exclamation-triangle"></i></span>
                    @this.Channel.SpecialInfo
                }
            }
        </div>

        <div class="channel-sample-rates">
            @if (_showSampleRates)
            {
                @foreach (var sampleRate in this.GetSampleRates())
                {
                    <div class="channel-sample-rate" @onclick="() => this.AppState.SampleRate = sampleRate">
                        @sampleRate
                    </div>
                }
            }
        </div>

        <div class="channel-datasets ml-auto">
            @if (_filteredDatasets.Any())
            {
                @foreach (var dataset in _filteredDatasets)
                {
                    <div class="channel-dataset @(this.AppState.IsDatasetSeleced(dataset) ? "selected" : "")"
                         @onclick="() => this.AppState.ToggleDatasetSelection(dataset)">
                        @dataset.Name
                    </div>
                }
            }
        </div>
    </div>
    <span class="channel-description">
        @if (this.AppState.IsEditEnabled)
        {
            <input type="text" @bind-value="this.Channel.Description" />
        }
        else
        {
            @this.Channel.Description
        }
    </span>
</div>